<h1 class="layout-header layout-center pb-1 pt-4" translate>STEP_ATTACHMENTS.TITLE</h1>
<div class="layout-start-content layout-end-footer layout-center overflow-auto pr-3">
  @if (!loading && !!stepInfo) {
    @if (doiAttachmentCategorySummariesEntries.length > 0) {
      @for (doiAttachmentCategorySummariesEntry of doiAttachmentCategorySummariesEntries; track doiAttachmentCategorySummariesEntry) {
        <div>
          <app-attachment-table
            [domainOfInfluenceAttachmentCategorySummariesEntry]="doiAttachmentCategorySummariesEntry"
            [stepInfo]="stepInfo"
            (updated)="updateCanApprove()"
            [canEdit]="canEdit"
          ></app-attachment-table>
        </div>
      }
    } @else {
      <p class="italic" translate>ATTACHMENT.NO_ATTACHMENTS</p>
    }
  } @else {
    <bc-spinner size="large"></bc-spinner>
  }
</div>

<app-wizard-sidebar
  class="layout-right"
  [stepInfo]="stepInfo"
  [checks]="checks"
  [approveStateLoading]="approveLoading"
  [canApprove]="canApprove"
  [canRevert]="true"
  (approve)="approve()"
  (revert)="revert()"
  hint="STEP_ATTACHMENTS.HINT"
>
</app-wizard-sidebar>
